var mb_utils={init:function(){this._extendJquery(),this._extendJavascript(),this.initIOS7FocusBugFix()},_extendJquery:function(){jQuery.fn.exists=function(){return this.length>0}},_extendJavascript:function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},printThis:function(){var e=navigator.userAgent.toLowerCase();window.print?window.print():-1!=e.indexOf("mac")?alert("Press 'Cmd+p' on your keyboard to print article. "):alert("Press 'Ctrl+p' on your keyboard to print article. ")},initScrollToTop:function(e){$(e).click(function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},600)})},addSlideToggleListener:function(e,t,n,o){e.click(function(){n(),t.slideToggle(o)})},touchclick:function(e,t){$(e).on("touchstart click",function(e){if(e.stopPropagation(),e.preventDefault(),!0===e.handled)return!1;t($(this),e),e.handled=!0})},initIOS7FocusBugFix:function(){Modernizr.touch&&($("input, select, textarea").focus(function(){$("body").addClass("fixfixed")}),$("input, select, textarea").blur(function(){$("body").removeClass("fixfixed")}))},distanceFromTop:function(e){if($(e).length>0)return $(e).offset().top},distanceFromTopOfContainer:function(e){return $(e).position().top},getParam:function(e){var t={};return location.search.substr(1).split("&").forEach(function(e){var n=e.split("="),o=n[0],i=n[1]&&decodeURIComponent(n[1]);o in t?t[o].push(i):t[o]=[i]}),t[e]},toggleText:function(e,t,n){e.preventDefault();var o=$(t).parents(".description"),i=o.find(".long"),a=o.find(".short"),s=(n=n===undefined?{}:n).speed?n.speed:400;if(o.hasClass("condensed")){console.log("expand text");var r=a.height();a.hide(),i.css("min-height",r),i.slideDown(s)}else console.log("condense text"),i.slideUp(s,function(){a.show()});o.toggleClass("condensed")},initExpandableElement:function(){$(".expandable_element_link").click(function(){var e=$(this).attr("data-expand-index"),t=$('.expandable_element[data-expand-index="'+e+'"]'),n=$(this).attr("data-expand-text"),o=$(this).attr("data-contract-text");if(n&&o){var i=t.is(":visible")?n:o;$(this).text(i)}else{if($(this).text().indexOf("+ more")>=0||$(this).text().indexOf("- less")>=0){i=t.is(":visible")?"+ more":"- less";$(this).text(i)}}t.slideToggle()})},writeToFancybox:function(e){$.fancybox({type:"html",content:e,openEffect:"none",closeEffect:"none",margin:0,padding:0})},simpleFormat:function(e,t){return e=e.replace(/\r\n?/,"\n"),(e=$.trim(e)).length>0&&(e=(e=e.replace(/\n\n+/g,"</p><p>")).replace(/\n/g,"<br />"),t&&(e="<p>"+e+"</p>")),e},getMSEdgeVersion:function(e){e=e||navigator.userAgent;var t=/\b(MSIE |Trident.*?rv:|Edge\/)(\d+)/.exec(e);if(t)return parseInt(t[2])},getIEVersion:function(){var e=navigator.userAgent,t=/MSIE\s?(\d+)(?:\.(\d+))?/i,n=e.match(t);return null!=n?{major:n[1],minor:n[2]}:e.indexOf("Trident/")>0?{major:11,minor:0}:e.indexOf("Edge/")>0?{major:12,minor:0}:{major:"-1",minor:"-1"}},linkCitationsToFootnotes:function(){var e=$(".wysiwyg_content ol.footnotes li");if(e.exists()){var t=$(".wysiwyg_content sup").not(".math");$.each(t,function(){var t=parseInt($(this).text()),n=e.get(t-1),o=null;n&&(o=$(n)),t&&o&&($(this).wrap('<a class="citation" href="#footnote_'+t+'"></a>'),0==o.hasClass("footnote")&&(o.addClass("footnote"),o.wrapInner(function(){return"<div id='footnote_"+t+"'></div>"})))})}$("a.citation").click(function(e){console.log("citation click"),e.preventDefault();var t=$(this).attr("href");console.log("href: "+t);var n=t.replace("#",""),o=$("div[id="+n+"]");mb_utils.slideToElement(o,105)})},launch_sized_popup_window:function(e,t,n,o,i){var a="",s="0";o!=undefined&&(a="?layout="+o),i!=undefined&&(s=i);window.open(e+a,"_blank","toolbar=0, titlebar=0, menubar=0, scrollbars="+s+", resizable=yes, width="+t+", height="+n);self.name="main"},slideToElement:function(e,t,n){var o;console.log("slideToElement.offset: "+t),void 0===t&&(t=0),o="string"==typeof e?$(e):e,n?window.scrollTo(0,o.offset().top-t):$("html, body").animate({scrollTop:o.offset().top-t},800)},mouseCheck:function(){isMobile.any()||(console.log("mouseCheck"),$("html.touchevents").length>0&&("yes"==mb_utils.readCookie("has_mouse")?$("html").removeClass("touchevents").addClass("no-touchevents"):$(window).one("mousemove",function(){mb_utils.createCookie("has_mouse","yes",1825),$("html").removeClass("touchevents").addClass("no-touchevents")})))},mobileAndTabletCheck:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},mobileCheck:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},humanize:function(e){return e.toString().toLowerCase().replace(/[_-]/g," ").replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},debounce:function(e,t,n){var o;return function(){var i=this,a=arguments,s=function(){o=null,n||e.apply(i,a)},r=n&&!o;clearTimeout(o),o=setTimeout(s,t),r&&e.apply(i,a)}},humanFileSize:function(e,t){var n=t?1e3:1024;if(Math.abs(e)<n)return e+" B";var o=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],i=-1;do{e/=n,++i}while(Math.abs(e)>=n&&i<o.length-1);return e.toFixed(1)+" "+o[i]}},isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},iPad:function(){return navigator.userAgent.match(/iPad/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return screen.width<=500||isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}},mb_nav={arrowBtn:"#site_nav_container .arrow_box",lastScrollTop:0,navTitle:".nav_item .nav_title",desktopStickyTopPos:0,opts:null,onscroll_classes:"nav_is_fixed",add_rem_selector:"body",nav_area:".nav_area",menu_open_div:".site_header_area",init:function(e,t){if(console.log("desktopStickyTopPos: "+e),e&&(this.desktopStickyTopPos=e),t&&t.style)switch(t.style){case"transparent":this.add_rem_selector=".site_header_area",this.onscroll_classes="fixed fixed_show";break;case"opaque_on_scroll":$(window).scroll(function(){var e=$(".site_header_area");$(window).scrollTop()>0?e.addClass("opaque"):e.removeClass("opaque")})}t&&t.onscroll_classes&&(this.onscroll_classes=t.onscroll_classes),t&&t.add_rem_selector&&(this.add_rem_selector=t.add_rem_selector),t&&(this.opts=t),this.initListeners()},initListeners:function(){$("a#menu_button").click(function(e){e.preventDefault(),$(mb_nav.nav_area).show(),$(mb_nav.menu_open_div).addClass("menu_open"),$("a#menu_button").hide(),$("body").addClass("nav_overlay_true")}),$("a.modal_close").click(function(e){e.preventDefault(),$(mb_nav.nav_area).hide(),$(mb_nav.menu_open_div).removeClass("menu_open"),$("a#menu_button").show(),$("body").removeClass("nav_overlay_true")}),$(mb_nav.arrowBtn).click(function(){nav.toggleSubnav(this)}),$(mb_nav.navTitle).click(function(){nav.toggleSubnav(this)}),$(window).scroll(mb_nav.onScroll)},onScroll:function(){var e=$(window).scrollTop();mb_nav.lastScrollTop;mb_nav.lastScrollTop=e,$(window).scrollTop()>mb_nav.desktopStickyTopPos?(mb_nav.opts&&mb_nav.opts.beforeScrollAdd&&mb_nav.opts.beforeScrollAdd(),$(mb_nav.add_rem_selector).addClass(mb_nav.onscroll_classes),mb_nav.opts&&mb_nav.opts.afterScrollAdd&&mb_nav.opts.afterScrollAdd()):(mb_nav.opts&&mb_nav.opts.beforeScrollRemove&&mb_nav.opts.beforeScrollRemove(),$(mb_nav.add_rem_selector).removeClass(mb_nav.onscroll_classes),mb_nav.opts&&mb_nav.opts.afterScrollRemove&&mb_nav.opts.afterScrollRemove())},toggleSubnav:function(e){if("inline-block"!=$(".subnav li").css("display")){var t=$(e).parent().find(".global_subnav_container"),n=$(e).parent().find(".arrow_box");$(t).slideToggle(300),$(n).toggleClass("reverse")}}},mb_meganav={init:function(){console.log("All 'mb_meganav.js' functionality has been moved to React template. You can now remove mb_meganav.init if the page is using React meganav.")}};$.extend(mb_utils,{initResponsiveElement:function(e,t,n,o,i){void 0===o&&(o=mb_responsive_utils.getResponsiveBreakpoint()),$(window).bind("load resize",function(){mb_responsive_utils.moveResponsiveElements(e,t,n,o,i)})}});var mb_responsive_utils={_responsive_breakpoint:769,setResponsiveBreakpoint:function(e){this._responsive_breakpoint=e},getResponsiveBreakpoint:function(){return this._responsive_breakpoint},moveResponsiveElements:function(e,t,n,o,i){var a=$(window).width()<this._responsive_breakpoint?n:t;1==i&&$("html").hasClass("touch")?mb_responsive_utils._moveElementIfNecessary(e,n):mb_responsive_utils._moveElementIfNecessary(e,a)},_moveElementIfNecessary:function(e,t){$(t).attr("id")!=undefined&&$(e).parent().attr("id")!=undefined&&$(t).attr("id")!=$(e).parent().attr("id")&&(console.log("Moving Responsive Element: "+e+" from #"+$(e).parent().attr("id")+" to "+t),$(e).prependTo(t))}};$.extend(mb_utils,{createCookie:function(e,t,n,o){if(console.log("mb_utils.createCookie: "+e,t,n,o),n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var a="; expires="+i.toGMTString()}else a="";if(1==(void 0===o||o)&&"https:"==window.location.protocol)var s="; secure";else s="";document.cookie=e+"="+t+a+s+"; path=/"},readCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return console.log("mb_utils.readCookie: "+e,i.substring(t.length,i.length)),i.substring(t.length,i.length)}return null},eraseCookie:function(e){mb_utils.createCookie(e,"",-1)}});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,o,i,a,s,r,l="",c=0;for(e=Base64._utf8_encode(e);c<e.length;)i=(t=e.charCodeAt(c++))>>2,a=(3&t)<<4|(n=e.charCodeAt(c++))>>4,s=(15&n)<<2|(o=e.charCodeAt(c++))>>6,r=63&o,isNaN(n)?s=r=64:isNaN(o)&&(r=64),l=l+Base64._keyStr.charAt(i)+Base64._keyStr.charAt(a)+Base64._keyStr.charAt(s)+Base64._keyStr.charAt(r);return l},decode:function(e){var t,n,o,i,a,s,r="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)t=Base64._keyStr.indexOf(e.charAt(l++))<<2|(i=Base64._keyStr.indexOf(e.charAt(l++)))>>4,n=(15&i)<<4|(a=Base64._keyStr.indexOf(e.charAt(l++)))>>2,o=(3&a)<<6|(s=Base64._keyStr.indexOf(e.charAt(l++))),r+=String.fromCharCode(t),64!=a&&(r+=String.fromCharCode(n)),64!=s&&(r+=String.fromCharCode(o));return r=Base64._utf8_decode(r)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},_utf8_decode:function(e){for(var t="",n=0,o=c1=c2=0;n<e.length;)(o=e.charCodeAt(n))<128?(t+=String.fromCharCode(o),n++):o>191&&o<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&o)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&o)<<12|(63&c2)<<6|63&c3),n+=3);return t}},mb_responsive_tables={init:function(){$(".wysiwyg_content table, .extra_wide_content").each(function(){var e=$(this),t=$("<div />",{"class":"table_wrapper",html:"<div />"}).insertBefore(e);e.data("scrollWrapper",t),e.appendTo(t.find("div")),e.outerWidth()>e.parent().outerWidth()&&e.data("scrollWrapper").addClass("has-scroll"),e.find("tr.expandable_element").length>0&&e.parents(".table_wrapper").parent().addClass("expandable_table_wrapper"),$(window).on("resize orientationchange",function(){e.outerWidth()>e.parent().outerWidth()?e.data("scrollWrapper").addClass("has-scroll"):e.data("scrollWrapper").removeClass("has-scroll")})})}};!function(e){var t="more_items",n=function(t,o){return this.$T=e(t),this.options=e.extend(!0,{page_number:0,url:"",button:e(".more_button .button"),entry_selector:t.children("li:last"),build_item_fn:n.prototype.buildItem,more_fn:"getMoreItemsAndAppend"},o),this._init(t,this.options),this};n.prototype._init=function(t,n){n.button.on("click",function(o){o.preventDefault(),e(t).more_items(n.more_fn)})},n.prototype.getMoreItemsAndAppend=function(t){return e(".loading").show(),this.options.button.hide(),this._getMore(t[0]),this.$T},n.prototype.exposeNextPage=function(){this.options.page_number+=1,this.$T.find(".page_"+this.options.page_number).show();var e=this.options.page_number+1;0==this.$T.find(".page_"+e).length&&this.options.button.hide()},n.prototype.emptyAndReload=function(t){this.$T.empty(),e(".loading").show(),this.options.button.hide(),this.options.zero_based?this.options.page_number=-1:this.options.page_number=0,this.options.params=t[0],this._getMore()},n.prototype._getMore=function(t){var n=this;n.options.get_items_on_load||(n.options.page_number+=1);var o={};this.options.page_key?o[this.options.page_key]=this.options.page_number:o.page=this.options.page_number;var i=e.extend(t,o,this.options.params),a=this.options.button;e.getJSON(this.options.url,i).done(function(t){var o="";n.options.before_fn&&n.options.before_fn();for(var i=0;i<t.items.length;i++)o+=n.options.build_item_fn(t.items[i]);""!=o?(n.options.get_items_on_load&&0==n.options.page_number?n.$T.append(o):n.options.entry_selector.after(o),n.options.entry_selector=n.$T.children("li:last")):n.options.get_items_on_load&&0==n.options.page_number&&n.$T.append("<p>There are no items matching this criteria.</p>"),t.error_message&&n.options.entry_selector.after("<hr><div class='error'>"+t.error_message+"</div>"),e(".loading").hide(),t.more&&1==t.more&&a.show(),n.options.get_items_on_load&&(n.options.page_number+=1),n.options.after_fn&&n.options.after_fn()}).fail(function(e,t,n){var o=t+", "+n;console.log("ajax request failed: "+o)})},n.prototype.buildItem=function(e){var t=e.target?e.target:"_blank",n='<li class="slide">';return n+='<a href="'+e.url.replace('"','"')+'" target="'+t+'">',n+='<div class="image_and_description_container">',n+='<div class="rollover_description">'+e.description,n+='<div class="overlay_arrow">',n+='<img alt="more arrow" src="/assets/overlay-arrow.png">',n+="</div>",n+="</div>",n+='<div class="img">',n+='<img alt="'+e.title.replace('"','"').replace(/(<([^>]+)>)/gi,"")+'" ',n+='class="thumb" src="'+e.thumb+'"></div>',n+='<div class="bottom_gradient">',n+="<div>",n+="<h3>"+e.title+"</h3>",n+="</div>",n+="</div>",n+="</div>",n+='<div class="list_text_content">',n+='<div class="content_title">',n+=e.title,n+="</div>",n+='<div class="article_teaser_body">',n+=e.description,n+="</div>",n+="</div>",n+="</a>",n+="</li>"},e.fn[t]=function(o){if(!e(this).length)return e(this);var i=e(this).data(t);return i&&0!=o.indexOf("_")&&i[o]&&"function"==typeof i[o]?i[o](Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void(i?0==o.indexOf("_")?e.error("Method "+o+" is private!"):e.error("Method "+o+" does not exist."):e.error("Plugin must be initialised before using method: "+o)):(i=new n(e(this),o),e(this).data(t,i),e(this))}}(jQuery),mb_sharelines={initted:!1,fb_app_id:null,init:function(e){this.fb_app_id=e,this.initted||(console.log("sharelines initted."),this.getPartnerScripts(),this.initListeners(),this.initted=!0),this.addClassesToAttachedSharelines()},initListeners:function(){$(".selected").click(function(e){mb_sharelines.shareMessage(this,e)}),$(".selector").click(function(){console.log("selector clicked"),$(this).parents(".shareline").find(".share_options").toggle()}),$(".share_options *").click(function(e){mb_sharelines.shareMessage(this,e);var t=$(this).attr("class").replace("share_btn","");console.log("selected ",t),$(this).parents(".shareline").find(".selected").attr("class","selected "+t),$(this).parents(".shareline").find(".share_options").hide()})},addClassesToAttachedSharelines:function(){var e=".shareline",t="bottom_attached_sl",n="top_attached_sl",o=$(e).next(e),i=$(e).next("br").next(e),a=$(e).prev(e),s=$(e).prev("br").prev(e);o.addClass(t),i.addClass(t),a.addClass(n),s.addClass(n)},shareMessage:function(e,t){if($(e).hasClass("fi-social-twitter")){console.log("tweet!");var n=$(e).attr("href");$(e).parents(".shareline").find(".selected").attr("href",n)}else if($(e).hasClass("fi-social-facebook")){console.log("facebook!"),t.preventDefault(),$(e).parents(".shareline").find(".selected").attr("href","#");var o=$(e).parents(".shareline").find(".share_text").text();"undefined"!=typeof FB?FB.ui({method:"feed",link:window.location.href,description:o},function(){}):console.error("No Facebook app id, need this to share on FB")}else console.log("Selected clicked but unknown state",$(e).attr("class"))},getPartnerScripts:function(){this.fb_app_id&&this.initFacebook(),this.initTwitter()},initTwitter:function(){$.getScript("https://platform.twitter.com/widgets.js")},initFacebook:function(){$.ajaxSetup({cache:!0}),$.getScript("//connect.facebook.net/en_US/sdk.js",function(){FB.init({appId:mb_sharelines.fb_app_id,version:"v2.4"})})}},mb_utils.mouseCheck=function(){isMobile.any()||(console.log("mouseCheck"),$("html.touchevents").length>0&&("yes"==mb_utils.readCookie("has_mouse")?$("html").removeClass("touchevents").addClass("no-touchevents"):$(window).one("mousemove",function(){mb_utils.createCookie("has_mouse","yes",1825),$("html").removeClass("touchevents").addClass("no-touchevents")})))};var nav={arrowBtn:"#site_nav_container .arrow_box",lastScrollTop:0,navTitle:".nav_item .nav_title",desktopStickyTopPos:0,opts:null,onscroll_classes:"nav_is_fixed",add_rem_selector:"body",nav_area:".nav_area",menu_open_div:".site_header_area",init:function(e,t){if(console.log("desktopStickyTopPos: "+e),e&&(this.desktopStickyTopPos=e),t&&t.style)switch(t.style){case"transparent":this.add_rem_selector=".site_header_area",this.onscroll_classes="fixed fixed_show";break;case"opaque_on_scroll":$(window).scroll(function(){var e=$(".site_header_area");$(window).scrollTop()>0?e.addClass("opaque"):e.removeClass("opaque")})}t&&t.onscroll_classes&&(this.onscroll_classes=t.onscroll_classes),t&&t.add_rem_selector&&(this.add_rem_selector=t.add_rem_selector),t&&(this.opts=t),this.initListeners()},initListeners:function(){$("a#menu_button").click(function(e){e.preventDefault(),$(nav.nav_area).show(),$(nav.menu_open_div).addClass("menu_open"),$("a#menu_button").hide(),$("body").addClass("nav_overlay_true")}),$("a.modal_close").click(function(e){e.preventDefault(),$(nav.nav_area).hide(),$(nav.menu_open_div).removeClass("menu_open"),$("a#menu_button").show(),$("body").removeClass("nav_overlay_true")}),$(nav.arrowBtn).click(function(){nav.toggleSubnav(this)}),$(nav.navTitle).click(function(){nav.toggleSubnav(this)}),$(window).scroll(nav.onScroll)},onScroll:function(){var e=$(window).scrollTop();nav.lastScrollTop;nav.lastScrollTop=e,$(window).scrollTop()>nav.desktopStickyTopPos?(nav.opts&&nav.opts.beforeScrollAdd&&nav.opts.beforeScrollAdd(),$(nav.add_rem_selector).addClass(nav.onscroll_classes),nav.opts&&nav.opts.afterScrollAdd&&nav.opts.afterScrollAdd()):(nav.opts&&nav.opts.beforeScrollRemove&&nav.opts.beforeScrollRemove(),$(nav.add_rem_selector).removeClass(nav.onscroll_classes),nav.opts&&nav.opts.afterScrollRemove&&nav.opts.afterScrollRemove())},toggleSubnav:function(e){if("inline-block"!=$(".subnav li").css("display")){var t=$(e).parent().find(".global_subnav_container"),n=$(e).parent().find(".arrow_box");$(t).slideToggle(300),$(n).toggleClass("reverse")}}},scical={key:"AIzaSyB-YdQWxXQtmjxqqnzWdfaXBox7yM7vonE",url:"https://www.googleapis.com/calendar/v3/calendars/eni.g.njoku@jpl.nasa.gov/events?maxResults=3&singleEvents=True&futureEvents=True&orderBy=startTime",footer_sel:"#footer_science_calendar",monthabbrs:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],init:function(){var e=scical.url+"&timeMin="+scical.curDate()+"&key="+this.key;$.get(e,scical.insertScienceCalendar)},insertScienceCalendar:function(e){$.each(e.items,function(e,t){var n=t.start.date==undefined?t.start.dateTime.substring(0,10):t.start.date,o=t.end.date==undefined?t.end.dateTime.substring(0,10):t.end.date,i="<div class='col"+(e+1)+"'><div class='event_date'>"+(n==o?scical.dateToStr(new Date(n)):scical.dateToStr(new Date(n))+" - "+scical.dateToStr(new Date(o)))+"</div><div class='event_title'>"+t.summary+"</div>";$(scical.footer_sel).append(i)})},dateToStr:function(e){return scical.monthabbrs[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()},curDate:function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,o=e.getFullYear();return t<10&&(t="0"+t),n<10&&(n="0"+n),today_formatted=o+"-"+n+"-"+t+"T00:00:00-04:00",today_formatted}};mb_parallax={init:function(){var e=$(".explore_overlay_page").length>0,t=$("section.feature_pages").length>0;if(mb_utils.mobileAndTabletCheck()||e||!t)$(".parallax_module .featured_image").each(function(t,n){e?$(n).siblings(".window").remove():$(n).siblings(".window").addClass("mobile");var o=$(n).data("image");$(n).append('<img src="'+o+'"></img>')});else{var n=mb_utils.getIEVersion(),o=n.major>1&&n.major<=9;$(".parallax_module .featured_image").each(function(e,t){$(t).imageScroll({container:$(t).closest(".parallax_module"),holderMinHeight:800,parallax:!o})})}}},$(document).ready(function(){mb_parallax.init()});var main={spinner_opts:{lines:8,length:5,width:3,radius:6,color:"#000",speed:1,trail:100,shadow:!1,className:"spinner",top:"20px",left:"50%"},mousePos:{x:-1,y:-1},nav_search_open:!1,nav_search_orig_size:null,changePage:function(e,t){"Website"==t&&window.open(e,"_blank"),window.location=e},init:function(){mb_utils.init(),main.initListeners(),nav.init();$("nav.secondary_nav").length;$(".main_feature").length>0&&$("body").addClass("main_feature_present"),$(".top_feature_area ~ .tertiary_nav_container").length>0&&$(".top_feature_area").addClass("before_tertiary_nav_container"),mb_responsive_tables.init(),this._checkAndSetFormElementsBasedOnQueryParams(),mb_utils.linkCitationsToFootnotes(),mb_utils.initExpandableElement(),mb_utils.mouseCheck(),this.equalHeights(),this._clearSearchIfExists()},initListeners:function(){if(automat.init(),$("html").on("blur",".nav_search .search_field",function(){$("body").trigger("dashboard_resize")}),isMobile.any()){var e=$("#featured_image").attr("data-mobile-image"),t=$("#featured_image").attr("data-image");$("#featured_image").siblings(".window").addClass("mobile");var n='<picture><source srcset="'+t+'"media="(min-width: 600px)"><source srcset="'+e+'"/><img src="'+e+'"></picture>';$("#featured_image").append(n),main._scrollable=!1,$("#orrery").on("click touchstart",function(){window.addEventListener("touchstart",main.orreryTouchStart,!1),window.addEventListener("touchmove",main.orreryTouchMove,{passive:!1}),window.addEventListener("touchend",main.orreryTouchEnd)}),window.addEventListener("message",function(e){"close_overlay"===e.data&&(window.removeEventListener("touchstart",main.orreryTouchStart,!1),window.removeEventListener("touchmove",main.orreryTouchMove,{passive:!1}),window.removeEventListener("touchend",main.orreryTouchEnd))})}else{var o,i=mb_utils.getIEVersion(),a=i.major>1;function s(){var e=$("#featured_image");$(e.get(0)).imageScroll("refresh")}i.major>1&&i.major<12&&$(".nav #orrery").css({"pointer-events":"none",visibility:"hidden",opacity:0}),$("#featured_image").imageScroll({container:$(".image_of_the_day"),holderMinHeight:400,holderMaxHeight:680,parallax:!a}),window.addEventListener("resize",function(){s()},!0),o=setInterval(s,100),setTimeout(function(){clearInterval(o)},5e3),window.addEventListener("load",function(){clearInterval(o)})}var r,l;mb_utils.mobileAndTabletCheck()||$(".fancybox").fancybox({maxWidth:$(window).width()-64,fitToView:!1,openEffect:"none",closeEffect:"none",padding:0}),isMobile.any()?(r=[20,20,20,20],l=!1):(r=[30,55,30,55],l=!0),$("a.fancybox_video").fancybox({fitToView:!1,autoscale:!1,margin:r,autoSize:!1,closeClick:!1,closeBtn:!1,openEffect:"none",closeEffect:"none",nextEffect:"fade",prevEffect:"fade",mouseWheel:!1,theme:"mb-video",arrows:l,beforeShow:function(){video&&$(video.video_div).exists()&&jwplayer(video.video_div).pause(!0)}});var c={padding:10,maxWidth:$(window).width()-64,openEffect:"fade",closeEffect:"fade",mouseWheel:!1,theme:"dark",helpers:{thumbs:{source:function(e){return $(e.element).attr("data-thumbnail")}}},beforeLoad:function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var e={share:[["Facebook"],["Twitter"],["Pinterest"],["Email"]],url:window.location.origin+$(this.element).attr("data-link"),share_text:$(this.element).attr("data-title")},t=$(this.element).attr("data-title");t+='<div class="wrapper_spacer">',t+='     <div class="buttons">',t+=" <div class='share_button_component' data-react-class=\"ShareButton\" data-react-props='"+JSON.stringify(e)+"' />";var n=$(this.element).attr("data-external-id");if(n){var o=mb_utils.readCookie("raw_images_selection"),i=(o?o.split("%2C"):[]).indexOf(n)>-1?"selected":"",a='$(window).trigger("selectToggleFromFancybox",'+n+")",s=$(this.element).attr("data-link").match(/\/(.+)$/)[1];t+='       <a class="button select_raw_image '+i+"\"  href='#' data-external-id='"+n+"' target=\"_top\" onclick='"+a+"; return false;'>",t+="<span class='checkbox_icon' />",t+="<span class='button_text' > SELECT</span>",t+="       </a>",t+='       <a class="button" href="'+$(this.element).attr("data-fancybox-href")+' " target="_top" download="'+s+'">',t+="DOWNLOAD",t+="       </a>",t+='       <a class="button" href="/raw_images/'+$(this.element).attr("data-id")+' " target="_top">',t+="more info",t+="       </a>"}else t+='       <a class="button" href="'+$(this.element).attr("data-link")+' " target="_top">',t+="more info",t+="       </a>";t+="     </div>",t+="   </div>",t+="</div>",this.title=t},afterShow:function(){var e=$(this.element).attr("data-external-id"),t=$(this.element).attr("data-id");e&&t?(console.log("raw images fancybox afterShow"),$(".fancybox-inner .fancybox-image").css("cursor","pointer").click(function(){$.fancybox.next()}),ga("create","UA-10170298-1","auto"),ga(function(e){var n=e.get("clientId");$.ajax({url:"/raw/view/"+t+"?cid="+n,type:"GET",dataType:"jsonp"})})):$(".fancybox-inner .fancybox-image").wrap('<a href="'+$(this.element).attr("data-link")+'"></a>'),ReactRailsUJS.mountComponents()},afterClose:function(){$(this.element).attr("data-id")&&$(window).trigger("setCurrentDetailFromFancybox",[$(this.element).attr("data-id")]),$("#at20mc.ipad").hide()}};$(".fancybox_slideshow").fancybox(c),$(".fancybox_slideshow_launch").click(function(e){e.preventDefault(),$(this).parents(".image_and_description_container").find("a.fancybox_slideshow").click()}),$(".fancybox_info").fancybox({openEffect:"none",closeEffect:"none",closeBtn:!1,mouseWheel:!1,maxWidth:$(window).width()-165,maxHeight:$(window).height(),fitToView:!1,width:"100%",height:"100%",autoSize:!1,theme:"mb-info",beforeLoad:function(){this.title=main.constructFancyBoxInfo(this.element,!0)},afterShow:function(){$(".close_button").click(function(){parent.$.fancybox.close(),"undefined"!=typeof _atw&&_atw.clb()}),"undefined"!=typeof addthis&&addthis.toolbox($(".addthis_toolbox").get()),$(".addthis_button_compact img").on("mouseover",function(){return!1})},padding:0}),$(window).resize(function(){$(window).width()>1024&&$(".vital_signs_menu ul").slick("slickGoTo",0)}),$("section.more_bar").click(function(e){main.scrollDown(e)})},scrollDown:function(e){var t;e.preventDefault(),t=$(".top_feature_area .more_bar").length>0?$(e.currentTarget).offset().top+$("section.more_bar").innerHeight():$(e.currentTarget).offset().top-($("header.site_header").innerHeight()-$("section.more_bar").innerHeight()),$("html,body").animate({scrollTop:t},600)},resizeFancybox:function(e){if(console.log(e),$(".fancybox-wrap").exists()){var t=50;$(".fancybox-wrap,.fancybox-inner").height(e+t)}},constructFancyBoxInfo:function(e){console.log("constructFancyBoxInfo");var t="";return t+='<div id="fancybox_info">',t+=' <div class="image_details">',t+='\t <div class="buttons clearfix">',t+='   <div class="close_button"></div>',t+='\t   <div class="inner_buttons">',t+='\t    <div class="addthis_toolbox addthis_default_style"addthis:url="'+$(e).attr("data-link")+'"addthis:title="'+$(e).attr("data-title")+'"addthis:description="'+$(e).attr("data-description").replace('"',"&quot;").replace(/(<([^>]+)>)/gi,"")+'">',t+='\t\t   <a class="addthis_button_compact">',t+='\t\t    <img src="/assets/share.png">',t+="\t\t   </a>",t+='\t    <div class="atclear"></div>',t+="    </div>",t+='\t   <a class="button" href="'+$(e).attr("data-link")+' " target="_top">',t+="more info",t+="\t   </a>",t+="\t  </div>",t+="\t </div>",t+='\t <div class="text">',t+='\t  <h2 class="title">',t+=$(e).attr("data-title"),t+="\t  </h2>",
t+='\t  <div class="description">',t+=$(e).attr("data-description"),t+="\t  </div>",$(e).attr("data-credit")!=undefined&&(t+='\t  <div class="image_caption">',t+=$(e).attr("data-credit"),t+="\t  </div>"),t+="  </div>",t+=" </div>",t+="</div>"},orreryTouchStart:function(e){main._scrollable=!1;let t=e.target;for(;null!==t.parentElement;){if(t.classList.contains("scrollable")){this._scrollable=!0;break}t=t.parentElement}},orreryTouchMove:function(e){main._scrollable||e.preventDefault()},orreryTouchEnd:function(){main._scrollable=!1},checkSubscribeForm:function(){var e=$("#newsletter_subscribe_email").val(),t=e.indexOf("@"),n=e.lastIndexOf(".");if(t<1||n<t+2||n+2>=e.length)return alert("Not a valid e-mail address"),!1;$.post("/newsletter_subscribe_submit",{email:e})},_checkAndSetFormElementsBasedOnQueryParams:function(){if("undefined"!=typeof form_params)for(var e=0;e<form_params.length;e++){var t=mb_utils.getParam(form_params[e].param);t&&(console.log("setting "+form_params[e].selector+" to "+t),$(form_params[e].selector).val(t))}},equalHeights:function(){viewportSize.getWidth();$(window).bind("load resize",function(){viewportSize.getWidth()<769?(viewportSize.getWidth(),$(".applications_large_button").unequalHeights(),viewportSize.getWidth()<600?$(".applications_large_button").unequalHeights():$(".applications_large_button").equalHeights()):($(".applications_large_button").unequalHeights(),$(".applications_large_button").equalHeights())})},_clearSearchIfExists:function(){try{$("form.nav_search")[0].reset()}catch(e){}}};$(function(){main.init()}),footer={init:function(){this._initIsotopeFooter()},_initIsotopeFooter:function(){$("#sitemap_directory, #sitemap_directory_404").isotope({itemSelector:".sitemap_block",layoutMode:"masonry"})}},$(document).ready(function(){footer.init()});var automat={init:function(){$("html").hasClass("touchevents")&&($(".automat_module .desktop_automat_items").click(function(e){e.stopPropagation()}),$(document).not($(".automat_module .desktop_automat_items")).click(function(){$(".automat_module .compartment.current .additional_info").slideUp(300),$(".automat_module .compartment").removeClass("current")}),$(".automat_module .compartment").click(function(e){e.preventDefault();var t=$(this),n=t.hasClass("current"),o=$(this).parents(".desktop_automat_items").find(".compartment.current");n?window.location=$(this).find("a")[0].href:(t.addClass("current"),$(this).find(".additional_info").slideDown(300),o.find(".additional_info").slideUp(300),o.removeClass("current"))}))}};(function(){null==window.JST&&(window.JST={}),window.JST.inner_grid_resources=function(e){return function(){var e,t,n,o;return t=window.HAML.escape,e=window.HAML.cleanValue,n=[],o=this.item.alt_text.replace(/<(?:.|\n)*?>/gm,""),n.push("<li class='slide'>\n  <div class='image_and_description_container'>"),!this.item.fancyboxable||this.dont_allow_fancybox?(n.push("    <a href='"+e(this.href)+"'>\n      <div class='rollover_description'>\n        <div class='rollover_description_inner'>"),n.push("          "+e(this.short_desc)),n.push("        </div>\n        <div class='overlay_arrow'>\n          <img src='/assets/overlay-arrow.png' alt='More'>\n        </div>\n      </div>\n      <div class='list_image'>\n        <img src='"+e(this.list_image_src)+"' alt='"+e(o)+"'>\n      </div>\n    </a>\n    <div class='list_text'>\n      <div class='content_title'>\n        <a href='"+e(this.href)+"'>"),n.push("          "+t(e(this.item.title))),n.push("        </a>\n      </div>\n      <div class='article_teaser_body'>"),n.push("        "+e(this.short_desc)),n.push("      </div>\n    </div>")):(n.push("    <a class='fancybox_slideshow' href='"+e(this.href)+"' data-fancybox-group='images' data-fancybox-href='"+e(this.fancybox_href)+"' data-title='"+e(this.item.title)+"' data-sharedescription='"+e(this.share_desc)+"' data-thumbnail='"+e(this.list_image_src)+"' data-link='"+e(this.href)+"'>\n      <div class='rollover_description'>\n        <div class='rollover_description_inner'>"),n.push("          "+e(this.short_desc)),n.push("        </div>\n        <div class='overlay_arrow'>\n          <img src='/assets/overlay-arrow.png' alt='More'>\n        </div>\n      </div>\n      <div class='list_image'>\n        <img src='"+e(this.list_image_src)+"' alt='"+e(o)+"'>\n      </div>\n    </a>\n    <div class='list_text'>\n      <div class='content_title'>"),this.item.fancyboxable?(n.push("        <a href='"+e(this.href)+"'>"),n.push("          "+t(e(this.item.title))),n.push("        </a>")):(n.push("        <a class='fancybox_slideshow_launch' href='"+e(this.href)+"'>"),n.push("          "+t(e(this.item.title))),n.push("        </a>")),n.push("      </div>\n      <div class='article_teaser_body'>"),n.push("        "+e(this.short_desc)),n.push("      </div>\n    </div>")),n.push("  </div>\n  <div class='bottom_gradient'>\n    <div>\n      <h3>"),n.push("        "+e(this.item.title)),n.push("      </h3>\n    </div>\n  </div>\n</li>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}).call(this),function(){var e=[].slice;window.HAML=function(){function t(){}return t.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\//g,"&#47;")},t.cleanValue=function(e){switch(e){case null:case void 0:return"";case!0:case!1:return"\x93"+e;default:return e}},t.extend=function(){var t,n,o,i,a,s,r;for(i=arguments[0],t=0,o=(s=2<=arguments.length?e.call(arguments,1):[]).length;t<o;t++)for(n in a=s[t])r=a[n],i[n]=r;return i},t.globals=function(){return{}},t.context=function(e){return this.extend({},t.globals(),e)},t.preserve=function(e){return e.replace(/\n/g,"&#x000A;")},t.findAndPreserve=function(e){var t;return t="textarea,pre".split(",").join("|"),e.replace(/\r/g,"").replace(RegExp("<("+t+")>([\\s\\S]*?)<\\/\\1>","g"),function(e,t,n){return"<"+t+">"+window.HAML.preserve(n)+"</"+t+">"})},t.surround=function(e,t,n){var o;return e+(null!=(o=n.call(this))?o.replace(/^\s+|\s+$/g,""):void 0)+t},t.succeed=function(e,t){var n;return(null!=(n=t.call(this))?n.replace(/\s+$/g,""):void 0)+e},t.precede=function(e,t){var n;return e+(null!=(n=t.call(this))?n.replace(/^\s+/g,""):void 0)},t.reference=function(e,t){var n,o,i;if(o=t?t+"_":"","function"==typeof e.hamlObjectRef?o+=e.hamlObjectRef():o+=((null!=(i=e.constructor)?i.name:void 0)||"object").replace(/\W+/g,"_").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase(),n="function"==typeof e.to_key?e.to_key():"function"==typeof e.id?e.id():e.id?e.id:e)return"class='"+o+"'"+" id='"+o+"_"+n+"'"},t}()}.call(this),function(){var e=[].slice;String.prototype.autoLink=function(){var t,n,o,i,a,s;return a=/(^|[\s\n]|<br\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,0<(i=1<=arguments.length?e.call(arguments,0):[]).length?(o=i[0],n=function(){var e;for(t in e=[],o)s=o[t],"callback"!==t&&e.push(" "+t+"='"+s+"'");return e}().join(""),this.replace(a,function(e,t,i){return""+t+(("function"==typeof o.callback?o.callback(i):void 0)||"<a href='"+i+"'"+n+">"+i+"</a>")})):this.replace(a,"$1<a href='$2'>$2</a>")}}.call(this),function(){}.call(this);