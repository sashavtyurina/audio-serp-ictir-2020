!function(a){function t(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return a[e].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=a,t.c=n,t.d=function(a,n,e){t.o(a,n)||Object.defineProperty(a,n,{configurable:!1,enumerable:!0,get:e})},t.n=function(a){var n=a&&a.__esModule?function(){return a.default}:function(){return a};return t.d(n,"a",n),n},t.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)},t.p="scripts/",t(t.s=207)}({15:function(a,t){function n(){var a=document.createElement("input");return a.setAttribute("type","range"),"range"===a.type}a.exports=n},16:function(a,t){angular.module("campaign").run(["$templateCache",function(a){a.put("frontend/views/campaign/base/boost.html",'<a id="close" role="button" tabindex="0" aria-label="Close form" ng-click="c.failureAndClose();">&times;</a>\n<div id="logo" title="Survey Logo" role="image" aria-label="logo"></div>\n<h1>{{campaign.data.title}}</h1>\n<p ng-if="!(campaign.data.html && state.allowHtml)" class="nl main">{{ campaign.data.text || \'&nbsp;\' }}</p>\n<p ng-bind-html="campaign.data.text | trustHtml" ng-if="state.allowHtml && campaign.data.html" class="main"></p>\n<div class="button">\n    <button id="button" ng-click="c.feedback()">{{campaign.data.buttonText}}</button>\n    <a href="#" ng-click="c.failureAndClose()" ng-if="campaign.data.cancelButton" id="close_link">{{campaign.data.cancelButton}}</a>\n</div>\n<div class=\'privacy-policy\' ng-if="campaign.data.privacy.active">\n    <p ng-show="showPP" ng-if="campaign.data.privacy.tooltip">{{campaign.data.privacy.tooltip}}</p>\n    <a target="_blank" ng-href="{{campaign.data.privacy.url}}" ng-mouseenter="showPP = true" ng-mouseout="showPP = false">{{campaign.data.privacy.text}}</a>\n</div>\n<a ng-if="smallPowered" target="_blank" ng-href="https://go.usabilla.com/powered_by_usabilla?utm_source=campaign&utm_medium=powered-link&utm_content={{campaign.type}}&utm_campaign={{campaign.id}}" title="Powered by Usabilla" class="powered-small"></a>\n<a ng-if="largePowered" target="_blank" ng-href="https://go.usabilla.com/powered_by_usabilla?utm_source=campaign&utm_medium=powered-link&utm_content={{campaign.type}}&utm_campaign={{campaign.id}}" title="Powered by Usabilla" class="powered">Powered by Usabilla</a>\n'),a.put("frontend/views/campaign/base/recruit.html",'<a id="close" role="button" tabindex="0" aria-label="Close form" ng-click="c.failureAndClose()">&times;</a>\n<div id="logo"  title="Survey Logo" role="image" aria-label="logo"></div>\n<h1>{{campaign.data.title}}</h1>\n<p ng-if="!(campaign.data.html && state.allowHtml)" class="nl main">{{ campaign.data.text || \'&nbsp;\' }}</p>\n<p ng-bind-html="campaign.data.text | trustHtml" ng-if="state.allowHtml && campaign.data.html" class="main"></p>\n<div class="button">\n    <a ng-href="{{campaign.data.recruitUrl}}" target="_blank" id="button" ng-click="c.successAndClose()">{{campaign.data.buttonText}}</a>\n    <a href="#" ng-click="c.failureAndClose()" ng-if="campaign.data.cancelButton" id="close_link">{{campaign.data.cancelButton}}</a>\n</div>\n<div class=\'privacy-policy\' ng-if="campaign.data.privacy.active">\n    <p ng-show="showPP" ng-if="campaign.data.privacy.tooltip">{{campaign.data.privacy.tooltip}}</p>\n    <a target="_blank" ng-href="{{campaign.data.privacy.url}}" ng-mouseenter="showPP = true" ng-mouseout="showPP = false">{{campaign.data.privacy.text}}</a>\n</div>\n<a ng-if="smallPowered" target="_blank" ng-href="https://go.usabilla.com/powered_by_usabilla?utm_source=campaign&utm_medium=powered-link&utm_content={{campaign.type}}&utm_campaign={{campaign.id}}" title="Powered by Usabilla" class="powered-small"></a>\n<a ng-if="largePowered" target="_blank" ng-href="https://go.usabilla.com/powered_by_usabilla?utm_source=campaign&utm_medium=powered-link&utm_content={{campaign.type}}&utm_campaign={{campaign.id}}" title="Powered by Usabilla" class="powered">Powered by Usabilla</a>\n'),a.put("frontend/views/campaign/base/boost.html",'<a id="close" role="button" tabindex="0" aria-label="Close form" ng-click="c.failureAndClose();">&times;</a>\n<div id="logo" title="Survey Logo" role="image" aria-label="logo"></div>\n<h1>{{campaign.data.title}}</h1>\n<p ng-if="!(campaign.data.html && state.allowHtml)" class="nl main">{{ campaign.data.text || \'&nbsp;\' }}</p>\n<p ng-bind-html="campaign.data.text | trustHtml" ng-if="state.allowHtml && campaign.data.html" class="main"></p>\n<div class="button">\n    <button id="button" ng-click="c.feedback()">{{campaign.data.buttonText}}</button>\n    <a href="#" ng-click="c.failureAndClose()" ng-if="campaign.data.cancelButton" id="close_link">{{campaign.data.cancelButton}}</a>\n</div>\n<div class=\'privacy-policy\' ng-if="campaign.data.privacy.active">\n    <p ng-show="showPP" ng-if="campaign.data.privacy.tooltip">{{campaign.data.privacy.tooltip}}</p>\n    <a target="_blank" ng-href="{{campaign.data.privacy.url}}" ng-mouseenter="showPP = true" ng-mouseout="showPP = false">{{campaign.data.privacy.text}}</a>\n</div>\n<a ng-if="smallPowered" target="_blank" ng-href="https://go.usabilla.com/powered_by_usabilla?utm_source=campaign&utm_medium=powered-link&utm_content={{campaign.type}}&utm_campaign={{campaign.id}}" title="Powered by Usabilla" class="powered-small"></a>\n<a ng-if="largePowered" target="_blank" ng-href="https://go.usabilla.com/powered_by_usabilla?utm_source=campaign&utm_medium=powered-link&utm_content={{campaign.type}}&utm_campaign={{campaign.id}}" title="Powered by Usabilla" class="powered">Powered by Usabilla</a>\n'),a.put("frontend/views/campaign/base/recruit.html",'<a id="close" role="button" tabindex="0" aria-label="Close form" ng-click="c.failureAndClose()">&times;</a>\n<div id="logo"  title="Survey Logo" role="image" aria-label="logo"></div>\n<h1>{{campaign.data.title}}</h1>\n<p ng-if="!(campaign.data.html && state.allowHtml)" class="nl main">{{ campaign.data.text || \'&nbsp;\' }}</p>\n<p ng-bind-html="campaign.data.text | trustHtml" ng-if="state.allowHtml && campaign.data.html" class="main"></p>\n<div class="button">\n    <a ng-href="{{campaign.data.recruitUrl}}" target="_blank" id="button" ng-click="c.successAndClose()">{{campaign.data.buttonText}}</a>\n    <a href="#" ng-click="c.failureAndClose()" ng-if="campaign.data.cancelButton" id="close_link">{{campaign.data.cancelButton}}</a>\n</div>\n<div class=\'privacy-policy\' ng-if="campaign.data.privacy.active">\n    <p ng-show="showPP" ng-if="campaign.data.privacy.tooltip">{{campaign.data.privacy.tooltip}}</p>\n    <a target="_blank" ng-href="{{campaign.data.privacy.url}}" ng-mouseenter="showPP = true" ng-mouseout="showPP = false">{{campaign.data.privacy.text}}</a>\n</div>\n<a ng-if="smallPowered" target="_blank" ng-href="https://go.usabilla.com/powered_by_usabilla?utm_source=campaign&utm_medium=powered-link&utm_content={{campaign.type}}&utm_campaign={{campaign.id}}" title="Powered by Usabilla" class="powered-small"></a>\n<a ng-if="largePowered" target="_blank" ng-href="https://go.usabilla.com/powered_by_usabilla?utm_source=campaign&utm_medium=powered-link&utm_content={{campaign.type}}&utm_campaign={{campaign.id}}" title="Powered by Usabilla" class="powered">Powered by Usabilla</a>\n')}])},17:function(a,t,n){angular.module("campaign",[]).run(n(29)).factory("CampaignService",n(30)).factory("StateService",n(8)).filter("trustHtml",n(9)).directive("body",n(31)).directive("ubCampaign",n(32)).directive("container",n(33)),n(16)},207:function(a,t,n){n(17)},29:function(a,t){function n(a,t,n){angular.element(t).bind("message",function(t){var n={};try{n=angular.fromJson(t.data)}catch(a){return}angular.isObject(n)&&n.type&&a.$broadcast("$$message."+n.type,n)}),a.$on("campaign.success",function(){n.success()}),a.$on("campaign.page",function(a,t){n.pageSwitch(t||{})})}n.$inject=["$rootScope","$window","CampaignService"],a.exports=n},30:function(a,t){function n(a){for(var t={_previousSize:null,composeMsg:function(a,t){var n={type:a};return JSON.stringify(angular.extend(n,t||{}))},postMsg:function(t,n){a.parent.postMessage(this.composeMsg(t,n),"*")},resize:function(a){angular.equals(a,t._previousSize)||(this.postMsg("resize",a),t._previousSize=a)},pageSwitch:function(a){this.postMsg("pageSwitch",a)},go:function(t){a.open(t,"_blank")}},n=["success","successOnFeedback","failure","close","feedback","markAsClicked","failureAndClose","successAndClose"],e=0;e<n.length;e++)t[n[e]]=function(a){return function(){this.postMsg(a)}}(n[e]);return t}n.$inject=["$window"],a.exports=n},31:function(a,t){function n(a,t,n){return{restrict:"AE",controller:["$rootScope","$attrs","StateService",function(a,t,e){t.$observe("allowHtml",function(a){e.allowHtml="true"===a}),a.$on("form:closeSurvey",function(){n.closeSurvey&&n.closeSurvey()})}],link:function(e,i,o){function c(a){27===a.keyCode&&e.$root.$emit("form:closeSurvey"),e.$evalAsync()}var l=t[0].location.search||"",r=l.match(/(\?|&)tags=([^\&]*)(\&|$)/);a.parent!==a&&r&&(o.$addClass(r[2]),e.position=r[2]),t.on("keydown",c),e.$on("$destroy",function(){t.off("keydown",c)}),o.analyticsUrl&&e.$on("analytics",function(a,t){new Image(1,1).src=o.analyticsUrl+t.e}),e.c=n}}}n.$inject=["$window","$document","CampaignService"],a.exports=n},32:function(a,t){function n(a,t){return{link:function(n,e,i){switch(n.campaign=a(i.ubCampaign)(n),n.campaign.data&&n.campaign.data.showOnce&&t.markAsClicked(),n.campaign.type||"boost"){case"boost":t.successOnFeedback()}}}}n.$inject=["$parse","CampaignService"],a.exports=n},33:function(a,t){function n(a,t){var n="";if(window.getComputedStyle){var e=t.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()});n=getComputedStyle(a).getPropertyValue(e)}else if(a.currentStyle)try{n=a.currentStyle[t]}catch(a){}return isNaN(n)?0:n}function e(a,t,e){return{restrict:"EAC",template:'<div ng-include="campaignTemplate"></div>',controller:["$scope","StateService",function(a,t){a.state=t}],link:function(i,o,c){function l(){p=parseInt(n(o[0],"marginLeft"),10),u=parseInt(n(o[0],"marginRight"),10),g=parseInt(n(o[0],"marginTop"),10),d=parseInt(n(o[0],"marginBottom"),10)}function r(){return!f||f&&document[f]?null:(s&&t.cancel(s),s=t(function(){l();var t={width:o[0].offsetWidth+p+u,height:o[0].offsetHeight+g+d};if(m){Math.abs(m-t.width)<8&&(t.width=m)}switch(m=t.width,i.position||""){case"top":t.margin=d,t.border=parseInt(n(o[0],"borderBottomWidth"),10);break;case"bottom":t.margin=g,t.border=parseInt(n(o[0],"borderTopWidth"),10);break;case"left":t.margin=u,t.border=parseInt(n(o[0],"borderRightWidth"),10);break;case"right":t.margin=p,t.border=parseInt(n(o[0],"borderLeftWidth"),10)}return a.resize(t),null},100,!0),null)}var s=null,m=null,p=0,u=0,g=0,d=0,f=void 0;i.attr={},angular.forEach(c,function(a,t){/^ub[A-Z]/.test(t)&&(i.attr[t]=a)}),l(),i.smallPowered=!("noSmallPowered"in c),"largePowered"in c&&(i.smallPowered=!1,i.largePowered=!0),i.showClose=!("noClose"in c),i.$watch("campaign.type",function(a){switch(a){case"boost":case"recruit":i.campaignTemplate="frontend/views/campaign/base/"+a+".html";break;case"poll":case"survey":i.campaignTemplate="frontend/views/campaign/form/"+a+".html";break;default:i.campaignTemplate=""}}),f=function(){var a=void 0,n=void 0;if(void 0!==document.hidden?(a="hidden",n="visibilitychange"):void 0!==document.msHidden?(a="msHidden",n="msvisibilitychange"):void 0!==document.webkitHidden&&(a="webkitHidden",n="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==a)return document.addEventListener(n,function(){t(function(){r()},200)},!1),a}(),i.$on("resize",function(){r()}),angular.element(e).ready(function(){t(function(){r()},200)}),i.$watch("campaign.data.width",function(a){var t=a||200;o[0].style.minWidth=t+"px"});var b=function(){i.$digest()};t(function(){for(var a=angular.element(o).find("img"),t=0;t<a.length;t++){a[t].onload=b}},0)}}}e.$inject=["CampaignService","$timeout","$document"],a.exports=e},8:function(a,t,n){function e(){var a={};return a.allowHtml=!1,a.supportsRange=i(),a}var i=n(15);a.exports=e},9:function(a,t){function n(a){return function(t){return a.trustAsHtml(t)}}n.$inject=["$sce"],a.exports=n}});